(declare-abstractions
  (
    (example_test_map.MapWrapper 0)
  )
  (
    ((Wrapper (a (Map Int Int)) (b (Map Int Int)) (c (Map Int Int))))
  )
)

; - Initializers
(define-contract example_test_map.MapWrapper.init
  (
   (result (out MapWrapper))
   )
  ((
    true
    (and 
      (= (a result) map.empty)
      (= (b result) map.empty)
      (= (c result) map.empty)
    )
  ))
)


; - Initializers
(define-contract example_test_map.MapWrapper.initValue
  (
   (result (out MapWrapper))
   (v (in Int))
   (w (in Int))
   )
  ((
    true
    (and 
      (= (a result) (map.singleton v w))
      (= (b result) (map.singleton v w))
      (= (c result) (map.singleton v w))
    )
  ))
)

; - Setter
(define-contract example_test_map.MapWrapper.set
  (
   (this (inout MapWrapper))
   )
  ((
    true
    (and 
      (= (a this) (map.set (old (a this)) 1 1))
      (= (b this) (map.set (old (b this)) 1 1))
      (= (c this) (map.set (old (c this)) 1 1))
    )
  ))
)

; - Get 
(define-contract example_test_map.MapWrapper.get
  (
   (this (inout MapWrapper))
   )
  ((
    true
    (and 
      (= 1 (map.get (a this) 1))
      (= 1 (map.get (b this) 1))
      (= 1 (map.get (c this) 1))
    )
  ))
)
(define-contract example_test_map.MapWrapper.get
  (
   (this (inout MapWrapper))
   )
  ((
    true
    (and 
      (= true (map.inDomain (a this) 1))
      (= true (map.inDomain (b this) 1))
      (= true (map.inDomain (c this) 1))
    )
  ))
)


; - Union 
;(define-contract example_test_map.MapWrapper.union
;  (
;   (this (inout MapWrapper))
;   (m (in MapWrapper))
;   )
;  ((
;    true
;    (and 
;      (= (map.union (old (a this)) (c m)) (a this))
;      (= (map.union (old (b this)) (c m)) (b this))
;      (= (map.union (old (c this)) (c m)) (c this))
;    )
;  ))
;)

; - Union
;(define-contract example_test_map.MapWrapper.getValues
;  (
;   (this (inout MapWrapper))
;   )
;  ((
;    true
;    (and 
;      (= 1 (map.set (a this) 1))
;      (= 1 (map.set (b this) 1))
;      (= 1 (map.set (c this) 1))
;    )
;  ))
;)
