(declare-abstractions
    ((example.TreeNode 0))
    (((TreeNode (absVal (Set Int))))))

(define-contract example.TreeNode.init
    ((result (out TreeNode))
     (v (in Int)))
    ((true
     (= (absVal result) (set.singleton v)))))

(define-contract example.TreeNode.add
    ((this (inout TreeNode))
     (v (in Int)))
    ((true
     (and (forall ((x Int)) (or (set.member (old (absVal this)) x) (= x v)))
          (set.member (absVal this) v)))))

(define-contract example.TreeNode.contains
    ((this (inout TreeNode))
     (v (in Int))
     (result (out Bool)))
    ((true
     (= result (set.member (absVal this) v)))))
